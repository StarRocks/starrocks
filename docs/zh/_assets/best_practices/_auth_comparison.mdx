
| 方式                   | CREATE USER (本地用户)                                   | CREATE SECURITY INTEGRATION (基于会话的虚拟用户)                |
| ---------------------- | ------------------------------------------------------ | ------------------------------------------------------------ |
| 描述                    | 手动在集群中创建用户。您可以将其与外部认证系统关联。用户在集群中显式存在。 | 定义外部认证集成。集群不存储任何用户信息。您可以选择将其与 Group Provider 结合使用以定义允许的用户。 |
| 登录过程                | 用户必须在集群中预先创建。在登录时，用户通过 StarRocks 或配置的外部认证系统（例如，LDAP、JWT）进行认证。只有预先创建的用户才能登录。 | 登录时，StarRocks 使用外部身份系统对用户进行认证。如果成功，它会在内部创建一个临时的、会话范围的虚拟用户。该用户在会话结束后被删除。 |
| 授权过程                | 由于用户存在于集群中，可以使用内置授权系统或 Apache Ranger 预先分配权限。 | 由于用户是虚拟的且基于会话，系统无法使用内置授权预先分配权限。授权必须依赖于 Apache Ranger。 |
| 优缺点及使用场景          | <ul><li>**优点**：完全灵活——支持内置和外部授权系统。</li><li>**缺点**：需要手动创建用户，可能比较繁琐。</li><li>**推荐用于**：小型用户群或集群处理访问控制的情况。</li></ul> | <ul><li>**优点**：设置简单；只需配置外部认证和定义允许的组。</li><li>**缺点**：无法使用本地 IBAC 进行用户级权限。</li><li>**推荐用于**：拥有统一外部认证平台的大型组织。</li></ul> |
