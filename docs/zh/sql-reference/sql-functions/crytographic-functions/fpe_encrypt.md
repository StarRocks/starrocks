---
displayed_sidebar: "Chinese"
---

# fpe_encrypt

## 功能

将字符串 `str` 的整数部分和小数部分分别使用格式保留加密（FPE）的FF1方法加密，并将加密后的结果整合为一个新的加密字符串。加密过程具体如下：
1. 对 str 的整数部分应用 fpe_ff1_encrypt 进行加密，并在加密结果的最前面补充一个占位符“1”。
2. 将 str 的小数部分乘以 100000000000000 后，使用 fpe_ff1_encrypt 进行加密，并在加密结果的末尾添加一个填位符号“1”。
通过上述步骤，我们可以确保每个部分的格式在加密过程中得到保留，并在最终生成的加密字符串中清楚地区分整数部分和小数部分。

反向函数为 [fpe_decrypt](fpe_decrypt.md)。

## 语法

```Haskell
fpe_encrypt(str, key);
```

## 参数说明

`str`: 加密以字符串格式表示decimal类型数据，例如 "-123.456"，支持的数据类型为 VARCHAR。

`key`: 用于加密 `str` 的 key 字符串，长度限制为16、24或者32，支持的数据类型为 VARCHAR。



## 返回值说明

返回值的数据类型为 VARCHAR。如果输入为 NULL，则返回 NULL。如果输入为空，则返回报错。

该函数仅接收2个参数，如果输入多个参数，会返回报错。


## 示例

```Plain Text
mysql> select fpe_encrypt('9237923.347343', 'abcdefghijk12345abcdefghijk12345');
+-----------------------------------------------------------------------+
| fpe_encrypt('9237923.347343', 'abcdefghijk12345abcdefghijk12345')     |
+-----------------------------------------------------------------------+
| 17705785.238108909558021                                              |
+-----------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select fpe_encrypt('9302923.04832', 'abcdefghijk12345abcdefghijk12345');
+----------------------------------------------------------------------+
| fpe_encrypt('9302923.04832', 'abcdefghijk12345abcdefghijk12345')     |
+----------------------------------------------------------------------+
| 14788209.02880443556771                                              |
+----------------------------------------------------------------------+
1 row in set (0.00 sec)
```