---
displayed_sidebar: docs
---

# array_top_n

返回给定数组中的前 n 个元素组成的数组，按照自然降序排列。如果 n 大于给定数组的大小，返回的数组大小将与输入数组相同，而不是 n。

## 语法

```sql
array_top_n(array, count)
```

## 参数说明

- `array`: 要从中提取前几个元素的数组。数组可以包含 StarRocks 支持的任何可比较数据类型的元素。

- `count`: 要返回的前几个元素的数量，类型为 INT。必须是非负整数。

## 返回值

返回一个数组，包含输入数组中的前 n 个元素，按降序排列。返回值的数据类型与输入数组的 ARRAY 类型相同。

## 使用说明

- 元素按照自然顺序降序排列。
- 如果 `count` 为 0，返回空数组。
- 如果 `count` 为负数，返回空数组。
- 如果 `count` 大于数组大小，返回整个数组按降序排列。
- 当数组参数为 NULL 时，结果为 NULL。
- 当 count 参数为 NULL 时，结果为 NULL。
- 数组内的 NULL 元素被认为小于任何非 NULL 值，如果包含在结果中会出现在末尾。

## 示例

示例 1：从整数数组获取前 3 个元素

```sql
mysql> SELECT array_top_n([1, 100, 2, 5, 3], 3);
+-----------------------------------+
| array_top_n([1,100,2,5,3], 3)    |
+-----------------------------------+
| [100,5,3]                         |
+-----------------------------------+
```

示例 2：count 大于数组大小

```sql
mysql> SELECT array_top_n([1, 100], 5);
+--------------------------+
| array_top_n([1,100], 5)  |
+--------------------------+
| [100,1]                  |
+--------------------------+
```

示例 3：字符串数组

```sql
mysql> SELECT array_top_n(['a', 'zzz', 'zz', 'b', 'g', 'f'], 3);
+----------------------------------------------------+
| array_top_n(['a','zzz','zz','b','g','f'], 3)      |
+----------------------------------------------------+
| ['zzz','zz','g']                                   |
+----------------------------------------------------+
```

示例 4：count 为 0

```sql
mysql> SELECT array_top_n([1, 2, 3], 0);
+--------------------------+
| array_top_n([1,2,3], 0)  |
+--------------------------+
| []                       |
+--------------------------+
```

示例 5：NULL 值处理

```sql
mysql> SELECT array_top_n([1, NULL, 3, 2], 3);
+---------------------------------+
| array_top_n([1,null,3,2], 3)   |
+---------------------------------+
| [3,2,1]                         |
+---------------------------------+
```

示例 6：与表数据配合使用

```sql
mysql> CREATE TABLE IF NOT EXISTS test (id INT, arr ARRAY<INT>) PROPERTIES ("replication_num"="1");
mysql> INSERT INTO test VALUES (1, [5, 2, 8, 1, 9]), (2, [10, 3, 7]);
mysql> SELECT id, array_top_n(arr, 2) FROM test;
+------+----------------------+
| id   | array_top_n(arr, 2)  |
+------+----------------------+
|    1 | [9,8]                |
|    2 | [10,7]               |
+------+----------------------+
```