-- name: test_tables
create database db_${uuid0};
-- result:
-- !result
use db_${uuid0};
-- result:
-- !result
CREATE TABLE `unique_table_with_null` ( `k1` date, `k2` datetime, `k3` char(20), `k4` varchar(20), `k5` boolean, `v1` tinyint, `v2` smallint, `v3` int, `v4` bigint, `v5` largeint, `v6` float, `v7` double, `v8` decimal(27,9) ) UNIQUE KEY(`k1`, `k2`, `k3`, `k4`, `k5`) COMMENT "OLAP" DISTRIBUTED BY HASH(`k1`, `k2`, `k3`, `k4`, `k5`) BUCKETS 3;
-- result:
-- !result
CREATE VIEW `unique_view_with_null` AS SELECT * FROM `unique_table_with_null`;
-- result:
-- !result
select TABLE_TYPE, `VERSION`, ROW_FORMAT  from information_schema.tables where TABLE_SCHEMA='db_${uuid0}' order by TABLE_NAME limit 1;
-- result:
BASE TABLE	None	None
-- !result
[UC]select * from information_schema.tables a full join information_schema.tables_config b on a.TABLE_SCHEMA=b.TABLE_SCHEMA where b.TABLE_NAME='unique_table_with_null';
-- result:
def	db_1b289bc796044317a138ee5a6c79b56a	unique_view_with_null	VIEW	None	None	None	None	None	None	None	None	None	None	2025-11-17 10:39:50	None	1970-01-01 08:00:00	utf8_general_ci	None    None        None    db_1b289bc796044317a138ee5a6c79b56a	unique_table_with_null	OLAP	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`	HASH	3	`k1`, `k2`, `k3`, `k4`, `k5`	{"compression":"LZ4","fast_schema_evolution":"true","replicated_storage":"true","replication_num":"1"}	11003
def	db_1b289bc796044317a138ee5a6c79b56a	unique_table_with_null	BASE TABLE	StarRocks	None	None	0	0	0	None	None	None	None	2025-11-17 10:39:50	2025-11-17 10:39:50	1970-01-01 08:00:00	utf8_general_ci	None	None	OLAP	'root'@'%'  db_1b289bc796044317a138ee5a6c79b56a	unique_table_with_null	OLAP	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`	HASH	3	`k1`, `k2`, `k3`, `k4`, `k5`	{"compression":"LZ4","fast_schema_evolution":"true","replicated_storage":"true","replication_num":"1"}	11003
-- !result
[UC]select a.TABLE_NAME, b.* from information_schema.tables a full join information_schema.tables_config b on a.TABLE_SCHEMA=b.TABLE_SCHEMA where b.TABLE_NAME='unique_table_with_null';
-- result:
unique_view_with_null	db_1b289bc796044317a138ee5a6c79b56a	unique_table_with_null	OLAP	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`	HASH	3	`k1`, `k2`, `k3`, `k4`, `k5`	{"compression":"LZ4","fast_schema_evolution":"true","replicated_storage":"true","replication_num":"1"}	11003
unique_table_with_null	db_1b289bc796044317a138ee5a6c79b56a	unique_table_with_null	OLAP	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`	HASH	3	`k1`, `k2`, `k3`, `k4`, `k5`	{"compression":"LZ4","fast_schema_evolution":"true","replicated_storage":"true","replication_num":"1"}	11003
-- !result
select CREATOR from information_schema.tables where TABLE_NAME='unique_table_with_null';
-- result:
'root'@'%'
-- !result
set enable_evaluate_schema_scan_rule=true;
-- result:
-- !result
select a.TABLE_NAME, b.TABLE_MODEL, b.PRIMARY_KEY, b.PARTITION_KEY, b.DISTRIBUTE_KEY from information_schema.tables a full join information_schema.tables_config b on a.TABLE_SCHEMA=b.TABLE_SCHEMA where b.TABLE_NAME='unique_table_with_null' and a.TABLE_SCHEMA='db_${uuid0}' ORDER BY a.TABLE_NAME;
-- result:
unique_table_with_null	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`
unique_view_with_null	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`
-- !result
set enable_evaluate_schema_scan_rule=false;
-- result:
-- !result
select a.TABLE_NAME, b.TABLE_MODEL, b.PRIMARY_KEY, b.PARTITION_KEY, b.DISTRIBUTE_KEY from information_schema.tables a full join information_schema.tables_config b on a.TABLE_SCHEMA=b.TABLE_SCHEMA where b.TABLE_NAME='unique_table_with_null' and a.TABLE_SCHEMA='db_${uuid0}' ORDER BY a.TABLE_NAME;
-- result:
unique_table_with_null	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`
unique_view_with_null	UNIQUE_KEYS	`k1`, `k2`, `k3`, `k4`, `k5`		`k1`, `k2`, `k3`, `k4`, `k5`
-- !result
set enable_evaluate_schema_scan_rule=true;
-- result:
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.tables;
-- result:
OK
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.views;
-- result:
OK
-- !result
[UC] select count(*) from information_schema.tables;
-- result:
76
-- !result
[UC] select count(*) from information_schema.views;
-- result:
1
-- !result
set enable_evaluate_schema_scan_rule=false;
-- result:
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.tables;
-- result:
OK
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.views;
-- result:
OK
-- !result
[UC] select count(*) from information_schema.tables;
-- result:
76
-- !result
[UC] select count(*) from information_schema.views;
-- result:
1
-- !result
create database if not exists test_information_schema_tables;
-- result:
-- !result
use test_information_schema_tables;
-- result:
-- !result
set enable_evaluate_schema_scan_rule=true;
-- result:
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.tables;
-- result:
OK
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.views;
-- result:
OK
-- !result
[UC] select count(*) from information_schema.tables;
-- result:
76
-- !result
[UC] select count(*) from information_schema.views;
-- result:
1
-- !result
set enable_evaluate_schema_scan_rule=false;
-- result:
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.tables;
-- result:
OK
-- !result
select if (count(*) > 0, "OK", "FAILED") from information_schema.views;
-- result:
OK
-- !result
[UC] select count(*) from information_schema.tables;
-- result:
76
-- !result
[UC] select count(*) from information_schema.views;
-- result:
1
-- !result
drop database if exists test_information_schema;
-- result:
-- !result
drop database if exists db_${uuid0};
-- result:
-- !result