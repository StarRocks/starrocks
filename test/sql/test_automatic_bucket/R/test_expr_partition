-- name: test_expr_partition
create database eee;
-- result:
-- !result
use eee;
-- result:
-- !result
create table t(k date, v int) PARTITION BY DATE_TRUNC('DAY', `k`)
PROPERTIES (
"replication_num" = "1",
"bucket_size" = "1"
);
-- result:
-- !result
select count(*) from information_schema.be_tablets t1, information_schema.tables_config t2 where TABLE_NAME='t' and t1.TABLE_ID=t2.TABLE_ID and TABLE_SCHEMA='eee';
-- result:
3
-- !result
insert into t values('2021-01-01', 1);
-- result:
-- !result
select count(*) from information_schema.be_tablets t1, information_schema.tables_config t2 where TABLE_NAME='t' and t1.TABLE_ID=t2.TABLE_ID and TABLE_SCHEMA='eee';
-- result:
6
-- !result
insert into t values('2021-01-03', 1);
-- result:
-- !result
select count(*) from information_schema.be_tablets t1, information_schema.tables_config t2 where TABLE_NAME='t' and t1.TABLE_ID=t2.TABLE_ID and TABLE_SCHEMA='eee';
-- result:
12
-- !result
insert into t values('2021-01-05', 1);
-- result:
-- !result
select count(*) from information_schema.be_tablets t1, information_schema.tables_config t2 where TABLE_NAME='t' and t1.TABLE_ID=t2.TABLE_ID and TABLE_SCHEMA='eee';
-- result:
18
-- !result
insert into t values('2021-01-01', 1);
-- result:
-- !result
select count(*) from information_schema.be_tablets t1, information_schema.tables_config t2 where TABLE_NAME='t' and t1.TABLE_ID=t2.TABLE_ID and TABLE_SCHEMA='eee';
-- result:
21
-- !result
select * from t;
-- result:
2021-01-03	1
2021-01-05	1
2021-01-01	1
2021-01-01	1
-- !result