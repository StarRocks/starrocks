-- name: test_ngram_bloom_filter
create database ngram_bloom_filter_db_1;
use  ngram_bloom_filter_db_1;
CREATE TABLE ngram_index(
    timestamp DATETIME NOT NULL,
    username STRING,
    price INT NULL,
    INDEX idx_name1(username) USING NGRAMBF ("gram_num" = "4", "bloom_filter_fpp" = "0.05")
)PROPERTIES ("replication_num" = "1");

show index from ngram_index;

insert into ngram_index values ('2023-01-01',"chinese",3);
insert into ngram_index values ('2023-01-02',"cheeeinese",4);
insert into ngram_index values ('2023-01-03',"我爱吃烤全羊yangyang",4);
insert into ngram_index values ('2023-01-04',"tonightisgread",4);

select * from ngram_index order by timestamp;
drop index idx_name1 on ngram_index;
function: wait_alter_table_finish()
show index from ngram_index;

ALTER TABLE ngram_index ADD INDEX idx_name1(username) USING NGRAMBF ('gram_num' = "4", "bloom_filter_fpp" = "0.01");
function: wait_alter_table_finish()
show index from ngram_index;
select * from ngram_index order by timestamp;