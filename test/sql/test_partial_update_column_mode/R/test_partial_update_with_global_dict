-- name: test_partial_update_column_with_global_dict
CREATE table tab1 (
      k1 INTEGER,
      v1 CHAR(20),
      v2 VARCHAR(20),
      v3 CHAR(20)
)
ENGINE=OLAP
PRIMARY KEY(`k1`)
DISTRIBUTED BY HASH(`k1`) BUCKETS 10
PROPERTIES (
    "replication_num" = "1"
);
-- result:
-- !result
set partial_update_mode = "column";
-- result:
-- !result
insert into tab1 values (1, 'aaa', 'aaa', 'aaa'), 
(2, 'aaa', 'aaa', 'aaa'), 
(3, 'aaa', 'aaa', 'aaa'), 
(4, 'aaa', 'aaa', 'aaa');
-- result:
-- !result
[UC]analyze full table tab1;
-- result:
test_db_bf9bb52301ce43249b53d59069b59b98.tab1	analyze	status	OK
-- !result
function: wait_global_dict_ready('v2', 'tab1')
-- result:

-- !result
update tab1 set v2 = 'bbb' where k1 = 3;
-- result:
-- !result
function: wait_global_dict_ready('v2', 'tab1')
-- result:

-- !result
select * from tab1 where v2 = 'bbb';
-- result:
3	aaa	bbb	aaa
-- !result