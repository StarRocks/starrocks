on: pull_request_review
name: Trigger Jobs
jobs:
  myJob:
    runs-on: ubuntu-latest
    steps:
    - name: prepare for job
      run: mkdir -p /data/jenkins
      
    - uses: luisrjaeger/approved-event-checker@master
      id: approved
      with:
        approvals: 2
        check_changes_requested: false
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
    - name: trigger jenkins job
      if: ${{ steps.approved.outputs.approved == 'true' }}
      uses: appleboy/jenkins-action@master
      with:
        url: "39.101.206.100:8090/"
        user: "starrocks"
        token: ${{ secrets.JENKINS_TOKEN }}
        job: "starrocks_admit_test"
