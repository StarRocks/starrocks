name: Label when reviewed

on: pull_request_review

jobs:
  label-when-reviewed:
    name: "Label PRs when reviewed"
    runs-on: ubuntu-latest
    outputs:
      approved: ${{ steps.approved.outputs.approved }}
    steps:
    - uses: taichi/approved-event-action@v1.2.1
      id: approved
      with:
        approvals: '2'
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        ACTIONS_ALLOW_UNSECURE_COMMANDS: 'true'
        
    - run: echo ${{ steps.approved.outputs.approved }} >> /home/runner/pr.env
        
    - name: Set Environment Variables
      uses: tw3lveparsecs/github-actions-setvars@v0.1
      with:
        envFilePath: /home/runner/pr.env
