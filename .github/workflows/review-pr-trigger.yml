name: Label when reviewed

on: pull_request_review

jobs:
  label-when-reviewed:
    name: "Label PRs when reviewed"
    runs-on: ubuntu-latest
    outputs:
      approved: ${{ steps.approved.outputs.approved }}
    steps:
    - uses: taichi/approved-event-action@v1.2.1
      id: approved
      with:
        approvals: '2'
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        ACTIONS_ALLOW_UNSECURE_COMMANDS: 'true'
        
    - name: PR comment with reactions
      uses: thollander/actions-comment-pull-request@v1
      with:
        message: |
          run starrocks_admit_test
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
